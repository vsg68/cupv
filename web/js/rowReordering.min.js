(function(a){a.fn.rowReordering=function(n){function c(o){if(o.fnSettings().oFeatures.bProcessing){a(".dataTables_processing").css("visibility","visible")}}function e(o){if(o.fnSettings().oFeatures.bProcessing){a(".dataTables_processing").css("visibility","hidden")}}function j(p,q){var o=1000000;a(q,p).each(function(){iPosition=parseInt(p.fnGetData(this,k.iIndexColumn));if(iPosition<o){o=iPosition}});return o}function h(o,p,r,s,q){p.sortable("cancel");if(s<=r.iLogLevel){if(q!=undefined){r.fnAlert(q,"")}else{r.fnAlert("Row cannot be moved","")}}r.fnEndProcessingMode(o)}function d(u,t,p){var s=a("#"+p,u);var w=u.fnGetData(s[0],k.iIndexColumn);var v=-1;var o;var q=s.prev(t);if(q.length>0){v=parseInt(u.fnGetData(q[0],k.iIndexColumn));if(v<w){v=v+1}}else{var r=s.next(t);if(r.length>0){v=parseInt(u.fnGetData(r[0],k.iIndexColumn));if(v>w){v=v-1}}}if(v<w){o="back"}else{o="forward"}return{sDirection:o,iCurrentPosition:w,iNewPosition:v}}function m(u,s,w,v,o,p,x){var q=w;var y=v;if(o=="back"){q=v;y=w}a(u.fnGetNodes()).each(function(){if(x!=""&&a(this).attr("data-group")!=x){return}var A=this;var z=parseInt(u.fnGetData(A,k.iIndexColumn));if(q<=z&&z<=y){if(A.id==p){u.fnUpdate(v,u.fnGetPosition(A),k.iIndexColumn,false)}else{if(o=="back"){u.fnUpdate(z+1,u.fnGetPosition(A),k.iIndexColumn,false)}else{u.fnUpdate(z-1,u.fnGetPosition(A),k.iIndexColumn,false)}}}});var r=u.fnSettings();if(r.oFeatures.bServerSide===false){var t=r._iDisplayStart;r.oApi._fnReDraw(r);r._iDisplayStart=t;r.oApi._fnCalculateEnd(r)}r.oApi._fnDraw(r)}function g(p,o){alert(p)}var f={iIndexColumn:0,iStartPosition:1,sURL:null,sRequestType:"POST",iGroupingLevel:0,fnAlert:g,fnSuccess:jQuery.noop,iLogLevel:1,sDataGroupAttribute:"data-group",fnStartProcessingMode:c,fnEndProcessingMode:e,fnUpdateAjaxRequest:jQuery.noop};var k=a.extend(f,n);var b,l;var i=function(q,o){var p=o.children();var r=o.clone();r.children().each(function(s){a(this).width(p.eq(s).width())});return r};return this.each(function(){var o=a(this).dataTable();var q=(o.fnSettings().aaSortingFixed==null?new Array():o.fnSettings().aaSortingFixed);q.push([k.iIndexColumn,"asc"]);o.fnSettings().aaSortingFixed=q;for(var p=0;p<o.fnSettings().aoColumns.length;p++){o.fnSettings().aoColumns[p].bSortable=false}o.fnDraw();a("tbody",o).disableSelection().sortable({cursor:"move",helper:i,update:function(w,x){var v=o;var u=a(this);var y="tbody tr";var r="";if(k.bGroupingUsed){r=a(x.item).attr(k.sDataGroupAttribute);if(r==null||r==undefined){h(v,u,k,3,"Grouping row cannot be moved");return}y="tbody tr["+k.sDataGroupAttribute+" ='"+r+"']"}var t=d(v,y,x.item.context.id);if(t.iNewPosition==-1){h(v,u,k,2);return}if(k.sURL!=null){k.fnStartProcessingMode(v);var s={url:k.sURL,type:k.sRequestType,data:{id:x.item.context.id,fromPosition:t.iCurrentPosition,toPosition:t.iNewPosition,direction:t.sDirection,group:r},success:function(z){k.fnSuccess(z);m(v,y,t.iCurrentPosition,t.iNewPosition,t.sDirection,x.item.context.id,r);k.fnEndProcessingMode(v)},error:function(z){h(v,u,k,1,z.statusText)}};k.fnUpdateAjaxRequest(s,k,v);a.ajax(s)}else{m(v,y,t.iCurrentPosition,t.iNewPosition,t.sDirection,x.item.context.id,r)}}})})}})(jQuery);